/*
 * XmlParser.cpp
 *
 *  Created on: Jan 25, 2015
 *      Author: micha
 */
#include "XmlParser.h"
#include <boost/foreach.hpp>

House readxml( const std::string &filename)
{
    // populate tree structure pt
    using boost::property_tree::ptree;
    ptree pt;
    read_xml(filename, pt);

    // traverse pt
    House ans;
    BOOST_FOREACH( ptree::value_type const& v, pt.get_child("House") ) {
        if( v.first == "floor" ) {
            Flight f;
            f.carrier = v.second.get<std::string>("carrier");
            f.number = v.second.get<unsigned>("number");
            f.date = v.second.get<std::string>("date");
            f.cancelled = v.second.get("<xmlattr>.cancelled", false);
            ans.push_back(f);
        }
    }

    return ans;
}

