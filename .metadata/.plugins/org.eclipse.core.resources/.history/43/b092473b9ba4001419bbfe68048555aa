/*
 * XmlParser.cpp
 *
 *  Created on: Jan 25, 2015
 *      Author: micha
 */
#include "XmlParser.h"
#include <boost/foreach.hpp>

House readxml( const std::string &filename)
{
    // populate tree structure pt
    using boost::property_tree::ptree;
    ptree pt;
    read_xml(filename, pt);

    // traverse pt
    House ans;
    BOOST_FOREACH( ptree::value_type const& v1, pt.get_child("House") ) {
        if( v1.first == "Floor" ) {
            Floor f;
            f.Name = v1.second.get<std::string>("<xmlattr>.Name", "NoName");
            BOOST_FOREACH( ptree::value_type const& v2, v1.second.get_child("Floor") ) {
                if( v.first == "floor" ) {
                   f.Name = v.second.get<std::string>("Name");
                   f.number = v.second.get<unsigned>("number");
                   f.date = v.second.get<std::string>("date");
                }
            ans.push_back(f);
        }
    }

    return ans;
}

